<template>
  <div class="rank-badge flex items-center gap-1.5 px-2 py-1 rounded-full border" :class="rankClass">
    <component :is="rankIcon" class="w-5 h-5" />
    <span class="text-sm font-medium">{{ rank.displayName }}</span>
  </div>
</template>

<script setup>
import { computed } from 'vue'

const props = defineProps({
  rank: {
    type: String,
    default: 'no-rank',
    validator: (value) => [
      'no-rank', 'bronze', 'silver', 'gold', 
      'diamond', 'double-diamond', 'ambassador', 'royal-ambassador'
    ].includes(value)
  },
  size: {
    type: String,
    default: 'medium',
    validator: (value) => ['small', 'medium', 'large'].includes(value)
  }
})

const rankData = {
  'no-rank': {
    displayName: 'No Rank',
    bgColor: 'bg-gray-100/90',
    textColor: 'text-gray-600',
    borderColor: 'border-gray-300'
  },
  'bronze': {
    displayName: 'Bronze',
    bgColor: 'bg-orange-100/90',
    textColor: 'text-orange-700',
    borderColor: 'border-orange-300'
  },
  'silver': {
    displayName: 'Silver',
    bgColor: 'bg-gray-200/90',
    textColor: 'text-gray-700',
    borderColor: 'border-gray-300'
  },
  'gold': {
    displayName: 'Gold',
    bgColor: 'bg-yellow-100/90',
    textColor: 'text-yellow-700',
    borderColor: 'border-yellow-300'
  },
  'diamond': {
    displayName: 'Diamond',
    bgColor: 'bg-blue-100/90',
    textColor: 'text-blue-700',
    borderColor: 'border-blue-300'
  },
  'double-diamond': {
    displayName: 'Double Diamond',
    bgColor: 'bg-purple-100/90',
    textColor: 'text-purple-700',
    borderColor: 'border-purple-300'
  },
  'ambassador': {
    displayName: 'Ambassador',
    bgColor: 'bg-amber-100/90',
    textColor: 'text-amber-700',
    borderColor: 'border-amber-300'
  },
  'royal-ambassador': {
    displayName: 'Royal Ambassador',
    bgColor: 'bg-gradient-to-r from-yellow-100 to-orange-100',
    textColor: 'text-orange-700',
    borderColor: 'border-orange-300'
  }
}

const currentRank = computed(() => rankData[props.rank])

const rankClass = computed(() => {
  return [
    currentRank.value.bgColor,
    currentRank.value.textColor,
    currentRank.value.borderColor
  ].join(' ')
})

const rankIcon = computed(() => {
  switch (props.rank) {
    case 'bronze':
      return BronzeIcon
    case 'silver':
      return SilverIcon
    case 'gold':
      return GoldIcon
    case 'diamond':
      return DiamondIcon
    case 'double-diamond':
      return DoubleDiamondIcon
    case 'ambassador':
      return AmbassadorIcon
    case 'royal-ambassador':
      return RoyalAmbassadorIcon
    default:
      return NoRankIcon
  }
})
</script>

<script>
// Icon Components
const NoRankIcon = {
  template: `
    <svg viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M10.4819 13.9291C10.793 13.9291 11.0747 13.8034 11.2797 13.6003C11.4873 13.3946 11.616 13.1093 11.616 12.7939C11.616 12.167 11.1082 11.6588 10.4819 11.6588C9.85553 11.6588 9.34771 12.167 9.34771 12.7939C9.34771 12.9414 9.3767 13.0819 9.42788 13.2112C9.59418 13.6314 10.0029 13.9291 10.4819 13.9291Z" fill="currentColor"/>
      <path d="M18.5536 13.2112C18.6048 13.0819 18.6338 12.9414 18.6338 12.7939C18.6338 12.167 18.126 11.6588 17.4996 11.6588C16.8733 11.6588 16.3655 12.167 16.3655 12.7939C16.3655 13.1093 16.4942 13.3946 16.7018 13.6004C16.9067 13.8034 17.1884 13.9291 17.4996 13.9291C17.9786 13.9291 18.3873 13.6314 18.5536 13.2112Z" fill="currentColor"/>
      <path d="M16.3063 18.1152H11.6279V19.2504H16.3063V18.1152Z" fill="currentColor"/>
      <path d="M24.5 8.90182C24.5 8.22591 24.0784 7.38079 23.211 6.31822C22.6145 5.58747 22.0257 5.02699 22.001 5.00351L21.6109 4.63338L21.2208 5.00344C21.2028 5.02046 20.8878 5.32064 20.4888 5.76257C18.7006 4.34654 16.4427 3.5 13.9908 3.5C8.20617 3.5 3.5 8.21023 3.5 14C3.5 19.7897 8.20617 24.5 13.9908 24.5C19.7754 24.5 24.4816 19.7897 24.4816 14C24.4816 12.8213 24.2864 11.6872 23.9269 10.6286C24.2867 10.1464 24.5 9.54858 24.5 8.90182Z" fill="currentColor"/>
    </svg>
  `
}

const BronzeIcon = {
  template: `
    <svg viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="14" cy="14" r="12" fill="#CD7F32"/>
      <path d="M19.4965 12.7667L15.6984 12.2148L14.0001 8.77307L12.3014 12.2148L8.50366 12.7667L11.2519 15.4452L10.6031 19.2279L14.0001 17.4421L17.397 19.2279L16.7483 15.4452L19.4965 12.7667Z" fill="#FFA500"/>
    </svg>
  `
}

const SilverIcon = {
  template: `
    <svg viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M14.0004 26.2497C7.24592 26.2497 1.75073 20.7545 1.75073 14.0001C1.75073 7.24564 7.24592 1.75085 14.0004 1.75085C20.7548 1.75085 26.25 7.24564 26.25 14.0001C26.25 20.7545 20.7544 26.2497 14.0004 26.2497Z" fill="white"/>
      <path d="M20.2071 5.37145C20.73 5.37145 21.2468 5.39833 21.7567 5.4472C19.7049 3.58479 16.9828 2.44812 14 2.44812C7.63041 2.44812 2.448 7.63013 2.448 14.0001C2.448 16.2735 3.11102 18.3941 4.24973 20.1832C4.86143 11.9015 11.769 5.37145 20.2071 5.37145Z" fill="#E0E0E0"/>
      <path d="M14.0006 25.5516C20.3702 25.5516 25.5526 20.3696 25.5526 13.9996C25.5526 10.6128 24.0873 7.56204 21.7577 5.44672C21.2478 5.39785 20.731 5.37097 20.2081 5.37097C11.7704 5.37097 4.86244 11.9014 4.25073 20.1827C6.30211 23.407 9.90475 25.5516 14.0006 25.5516Z" fill="#B5B5B5"/>
      <path d="M14.0004 23.1368C19.0464 23.1368 23.1369 19.0463 23.1369 14.0003C23.1369 8.95433 19.0464 4.86377 14.0004 4.86377C8.95445 4.86377 4.86389 8.95433 4.86389 14.0003C4.86389 19.0463 8.95445 23.1368 14.0004 23.1368Z" fill="#9E9E9E"/>
      <path d="M19.4965 12.7669L15.6984 12.2151L14.0001 8.77332L12.3014 12.2151L8.50366 12.7669L11.2519 15.4455L10.6031 19.2281L14.0001 17.4423L17.397 19.2281L16.7483 15.4455L19.4965 12.7669Z" fill="#F6F6F6"/>
    </svg>
  `
}

const GoldIcon = {
  template: `
    <svg viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M26.1333 13.6111C26.5222 13.8445 26.5222 14.1556 26.1333 14.3889L11.1222 23.1778C10.7333 23.4111 10.1889 23.4111 9.79998 23.1778L1.86665 18.5111C1.47776 18.2778 1.47776 17.9667 1.86665 17.7334L16.9555 8.94447C17.3444 8.71114 17.8889 8.71114 18.2778 8.94447L26.1333 13.6111Z" fill="#F9A83D"/>
      <path d="M10.8889 17.6562L10.5778 23.334C10.2667 23.334 10.0333 23.334 9.79999 23.1784L1.86665 18.5118C1.63332 18.434 1.55554 18.2784 1.55554 18.1229C1.55554 18.0451 1.63332 17.9673 1.78888 17.8896L6.29999 15.2451L10.8889 17.6562Z" fill="#FFB961"/>
      <path d="M26.4444 13.9223L25.2778 9.33337L10.8889 17.6556L10.5778 23.2556L26.4444 13.9223Z" fill="#F9A83D"/>
    </svg>
  `
}

const DiamondIcon = {
  template: `
    <svg viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M13.873 4.61237H8.88559C8.70619 4.61237 8.53388 4.69833 8.40558 4.8519L3.70629 10.4758C3.55613 10.6555 3.48903 10.8967 3.50145 11.132L12.1851 14.2475L13.873 4.61237Z" fill="#FF5F66"/>
      <path d="M24.289 10.4863L19.7316 5.12968L19.4911 4.84675C19.3631 4.6963 19.1927 4.6123 19.0154 4.6123H13.9377L16.331 13.1732L24.4993 11.132C24.508 10.8993 24.4388 10.6624 24.289 10.4863Z" fill="#FA184B"/>
      <path d="M17.854 11.132L13.9061 9.74603L10.1181 11.132L13.8304 23.3804C13.8905 23.3903 13.9514 23.3903 14.0116 23.3806L17.8604 11.1427L17.854 11.132Z" fill="#FF5F66"/>
    </svg>
  `
}

const DoubleDiamondIcon = {
  template: `
    <svg viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M18.9956 7.59085H18.9952C17.2559 7.27931 15.7828 7.7167 14.5754 8.90267C13.9831 9.74196 13.9887 10.6024 14.4693 11.4798C15.7329 11.7951 17.0352 11.7832 18.3735 11.4668L18.9756 9.74807C19.222 9.04414 19.225 8.28587 18.9956 7.59085Z" fill="#00C8FB"/>
      <path d="M23.8482 20.4671C23.1781 19.2775 22.1167 18.7702 20.7534 18.7891C19.2763 19.0742 18.1879 19.9798 17.6617 21.4776C17.2758 22.3369 17.4895 23.1141 18.4645 23.6458L22.6728 21.6213C23.1859 21.3745 23.5967 20.9662 23.8482 20.4671Z" fill="#AC77F2"/>
      <path d="M24.3206 16.8202C23.5012 18.2808 22.2879 18.8845 20.7531 18.7888C19.7598 17.2797 19.73 15.6817 20.4047 14.0186L23.1622 15.5135C23.7047 15.8079 24.1057 16.2765 24.3206 16.8202Z" fill="#BE96F2"/>
    </svg>
  `
}

const AmbassadorIcon = {
  template: `
    <svg viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M14.0003 5.02777C13.502 5.02777 13.0168 5.08398 12.5505 5.19004C15.4479 5.84908 17.6106 8.44076 17.6106 11.5377C17.6106 14.6347 15.4479 17.2264 12.5505 17.8854C13.0168 17.9915 13.502 18.0477 14.0003 18.0477C17.5957 18.0477 20.5103 15.1331 20.5103 11.5377C20.5103 7.94239 17.5957 5.02777 14.0003 5.02777Z" fill="#FFD064"/>
      <path d="M14.1797 14.0364L16.4266 15.5488C16.5149 15.6083 16.6125 15.617 16.698 15.5907C16.7774 15.4828 16.8537 15.3725 16.9269 15.2599C16.9251 15.2384 16.9212 15.2165 16.9148 15.1942L16.1707 12.5899C16.1348 12.4642 16.1787 12.3293 16.2816 12.2488L17.9975 10.9055C17.9691 10.5944 17.9197 10.2894 17.851 9.9918L15.5211 9.90822C15.3905 9.90355 15.2757 9.82015 15.2309 9.69738L14.3021 7.15307C14.1994 6.87167 13.8014 6.87167 13.6986 7.15307L12.7698 9.69729C12.725 9.82006 12.6103 9.90346 12.4796 9.90813L9.77293 10.0052C9.47353 10.016 9.35059 10.3945 9.58644 10.5791L11.7192 12.2487C11.8221 12.3292 11.8659 12.4641 11.83 12.5898L11.0859 15.1941C11.0036 15.4821 11.3256 15.716 11.5741 15.5488L13.821 14.0364C13.9295 13.9634 14.0713 13.9634 14.1797 14.0364Z" fill="#AA7926"/>
    </svg>
  `
}

const RoyalAmbassadorIcon = {
  template: `
    <svg viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M14 26.25C13.4588 26.25 12.9219 26.1333 12.4318 25.9109C11.9009 25.999 11.3522 25.9726 10.8294 25.8326C10.3065 25.6924 9.8182 25.4408 9.40242 25.0992C8.86682 25.0468 8.34361 24.8794 7.875 24.6088C7.40625 24.3381 6.99965 23.9687 6.68651 23.5312C6.18254 23.3419 5.72044 23.0447 5.33791 22.662C4.95562 22.2799 4.65842 21.8177 4.46888 21.3136C4.03123 21.0003 3.66177 20.5937 3.39117 20.125C3.12047 19.6563 2.95308 19.1331 2.90083 18.5975C2.55903 18.1818 2.30742 17.6934 2.16731 17.1705C2.0273 16.6478 2.00098 16.0991 2.08893 15.5681C1.86657 15.078 1.75 14.5412 1.75 14C1.75 13.4588 1.86657 12.922 2.08893 12.4319C2.00098 11.9009 2.0273 11.3522 2.16731 10.8295C2.30738 10.3065 2.55903 9.81816 2.90083 9.40247C2.95308 8.86692 3.12047 8.34371 3.39117 7.87495C3.66181 7.40629 4.03123 6.99965 4.46888 6.68642C4.65842 6.18225 4.95567 5.72015 5.33815 5.33781C5.72048 4.95529 6.18254 4.65813 6.68656 4.46883C6.9997 4.03123 7.40629 3.66191 7.8749 3.39117C8.34361 3.12056 8.86682 2.95313 9.40247 2.90073C9.8182 2.55907 10.3066 2.30752 10.8293 2.16741C11.3523 2.02725 11.901 2.00093 12.4319 2.08903C12.9219 1.86666 13.4588 1.75 14 1.75C14.5412 1.75 15.078 1.86666 15.5681 2.08908C16.0991 2.00098 16.6478 2.02735 17.1706 2.16741C17.6934 2.30757 18.1817 2.55912 18.5975 2.90078C19.1331 2.95318 19.6563 3.12061 20.125 3.39117C20.5937 3.66186 21.0003 4.03132 21.3134 4.46883C21.8175 4.65813 22.2795 4.95534 22.6621 5.33801C23.0443 5.72015 23.3415 6.18225 23.5311 6.68642C23.9688 6.99965 24.3382 7.40629 24.6088 7.87495C24.8795 8.34366 25.0469 8.86687 25.0991 9.40247C25.441 9.8182 25.6926 10.3066 25.8326 10.8295C25.9727 11.3522 25.999 11.9009 25.911 12.4319C26.1334 12.922 26.25 13.4588 26.25 14C26.25 14.5412 26.1334 15.078 25.9111 15.5681C25.999 16.0991 25.9727 16.6478 25.8327 17.1705C25.6926 17.6935 25.441 18.1818 25.0992 18.5975C25.0469 19.1331 24.8795 19.6563 24.6088 20.1251C24.3383 20.5937 23.9688 21.0003 23.5312 21.3136C23.3416 21.8178 23.0444 22.2799 22.6619 22.6622C22.2796 23.0447 21.8175 23.3419 21.3135 23.5312C21.0003 23.9687 20.5938 24.3381 20.1251 24.6088C19.6564 24.8794 19.1332 25.0469 18.5976 25.0993C18.1818 25.441 17.6935 25.6925 17.1708 25.8326C16.6478 25.9727 16.0991 25.999 15.5682 25.911C15.078 26.1333 14.5412 26.25 14 26.25Z" fill="#FFC800"/>
      <path d="M17.8439 18.5624H10.1558C9.82642 18.5624 9.53931 18.3382 9.45945 18.0187L7.92183 11.8682C7.85388 11.5963 7.9504 11.3097 8.16908 11.1343C8.38772 10.9588 8.68846 10.9268 8.93921 11.0522L11.4199 12.2925L13.3844 9.01838C13.5142 8.80218 13.7478 8.66992 13.9999 8.66992C14.252 8.66992 14.4856 8.80223 14.6154 9.01838L16.5799 12.2925L19.0606 11.0522C19.3112 10.9268 19.612 10.9588 19.8307 11.1343C20.0494 11.3097 20.1459 11.5963 20.0779 11.8682L18.5403 18.0187C18.4604 18.3382 18.1733 18.5624 17.8439 18.5624Z" fill="#FFE66F"/>
    </svg>
  `
}

export default {
  components: {
    NoRankIcon,
    BronzeIcon,
    SilverIcon,
    GoldIcon,
    DiamondIcon,
    DoubleDiamondIcon,
    AmbassadorIcon,
    RoyalAmbassadorIcon
  }
}
</script>

<style scoped>
.rank-badge {
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

/* Size variants */
.rank-badge.small {
  @apply text-xs px-1.5 py-0.5;
}

.rank-badge.small svg {
  @apply w-3.5 h-3.5;
}

.rank-badge.large {
  @apply text-base px-3 py-2;
}

.rank-badge.large svg {
  @apply w-6 h-6;
}
</style>
